---
description: Daten-Sync zwischen GerÃ¤ten â€“ localStorage ist gerÃ¤te-spezifisch
alwaysApply: true
---

# ğŸ”’ Daten zwischen GerÃ¤ten â€“ immer vorausdenken

## Grundregel (unverÃ¤nderlich)

**localStorage ist gerÃ¤te-spezifisch.** Was am Handy gespeichert wird, kommt NIE automatisch am Mac an â€“ und umgekehrt.

## Bei JEDEM neuen Feature das Daten/Bilder/Videos speichert â€“ sofort 3 Fragen:

1. **Wo wird gespeichert?**
   - localStorage â†’ nur auf diesem GerÃ¤t
   - GitHub â†’ Vercel â†’ Ã¼berall âœ…

2. **Wie kommt es auf andere GerÃ¤te?**
   - Einziger zuverlÃ¤ssiger Weg: **GitHub Upload â†’ Vercel-Pfad**
   - Base64 im localStorage: nie auf anderen GerÃ¤ten sichtbar
   - blob:-URLs: nur solange die Session lÃ¤uft, dann weg

3. **Greift der Fallback auf ALLEN GerÃ¤ten?**
   - Nicht nur auf `vercel.app` prÃ¼fen â€“ auch `localhost` und andere GerÃ¤te
   - Immer absolute Vercel-Pfade als Fallback: `/img/k2/dateiname.jpg`

## Konkret fÃ¼r Bilder und Videos:

| Gespeichert als | Sichtbar wo | LÃ¶sung |
|---|---|---|
| `data:image/...` (Base64) | Nur dieses GerÃ¤t | â†’ GitHub Upload â†’ `/img/k2/name.jpg` |
| `blob:http://...` | Nur diese Session | â†’ GitHub Upload â†’ `/img/k2/name.mp4` |
| `/img/k2/name.jpg` | Ãœberall âœ… | Fertig |

## Pflicht beim Speichern von Bildern/Videos:

1. Sofort lokal speichern (fÃ¼r sofortige Vorschau) âœ…
2. **Parallel** GitHub Upload starten
3. Nach Upload: localStorage mit Vercel-Pfad (`/img/k2/...`) **Ã¼berschreiben**
4. Beim Lesen: Base64/blob automatisch durch Vercel-Pfad ersetzen (Migration)

## index.html Timestamp:

`node scripts/write-build-info.js` aktualisiert **IMMER** index.html (nicht nur bei `--inject-html`).
Ohne aktuellen Timestamp lÃ¤dt der Mac/das Handy nie automatisch neu.
